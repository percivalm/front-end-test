!function(){function e(e,t){function n(){return t.get("/api/customers/served").then(function(t){e.customersServed=t.data})}function o(){return t.get("/api/customers").then(function(t){e.customers=t.data})}e.customers=[],e.customersServed=[],o(),n(),e.onCustomerAdded=function(){o()},e.onCustomerRemoved=function(){o()},e.onCustomerServed=function(){o(),n()}}angular.module("qudini.QueueApp",["ui.bootstrap","angularMoment"]).controller("QueueCtrl",["$scope","$http",e])}(),function(){function e(e){return{restrict:"E",scope:{onAdded:"&"},templateUrl:"/add-customer/add-customer.html",link:function(t){t.products=[{name:"Grammatical advice"},{name:"Magnifying glass repair"},{name:"Cryptography advice"}],t.add=function(){var n={name:t.name,product:{name:t.product.name}};e({method:"POST",url:"/api/customer/add",data:JSON.stringify(n)}).then(function(e){console.log(e),t.onAdded()()})}}}}e.$inject=["$http"],angular.module("qudini.QueueApp").directive("addCustomer",e)}(),function(){function e(e){return{restrict:"E",scope:{customer:"=",onRemoved:"&",onServed:"&"},templateUrl:"/customer/customer.html",link:function(t){t.queuedTime=moment(t.customer.joinedTime).fromNow(),t.servedTime=t.customer.servedTime?moment(new Date(t.customer.servedTime)).format("LTS"):"",t.remove=function(){e({method:"DELETE",url:"/api/customer/remove",params:{id:t.customer.id}}).then(function(e){t.onRemoved()()})},t.serve=function(){var n={id:t.customer.id};e({method:"POST",url:"/api/customer/serve",data:JSON.stringify(n)}).then(function(e){t.onServed()()})}}}}e.$inject=["$http"],angular.module("qudini.QueueApp").directive("customer",e)}();